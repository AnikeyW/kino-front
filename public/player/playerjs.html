<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title></title> 
        <meta charset="UTF-8">
        <script src="playerjsProV1.4.js" type='text/javascript'></script>
    <meta name="robots" content="noindex nofollow"/>
	</head>
	<body>
    <style>
        html,body{
            margin:0;padding:0;width:100%;height:100%;
        }
    </style>
    <script type="text/javascript">
      var isFramed=false;
      try {
        isFramed = window != window.top || document != top.document || self.location != top.location;
      } catch (e) {
        isFramed = true;
      }
      if (!isFramed) {
        document.querySelectorAll('body')[0].remove();
        document.querySelectorAll('html')[0].innerHTML = '<style>body,html{background:#000;color:#fff;position:relative;margin:0;height:100%;font:12px Verdana,sans-serif;} .error_player{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:100%;width:100%;text-align:center;font-size:18px;}</style><div class="error_player">Контент не найден или недоступен в вашем регионе! <br>Приносим свои извинения за неудобства.</div>';
      }
    </script>
        
    <div id="playerjs" style="width:100%;height:100%;"></div>

    <script type="text/javascript">
            
        var ps = location.href.substr(location.href.indexOf("html?")+5).split("&");

        var playerjs

        let skipCredits = null
        let skipIntro = null
        let skipIntroEnd = null
        let skipRepeat = null
        let skipRepeatEnd = null
        let defaultSubtitle = null

        function get_skip_credits(){
          window.parent.postMessage({ event: "CLICK_BUTTON_NEXT_EPISODE" }, "*");
        }

        function get_skip_intro(){
          if(skipIntroEnd){
            playerjs.api('seek', skipIntroEnd)
          }
        }

        function get_skip_repeat(){
          if(skipRepeatEnd){
            playerjs.api('seek', skipRepeatEnd)
          }
        }

        window.addEventListener("message", (event) => {
          if (event.data.type === "MY_VARIABLES") {
            if(event.data.value.mode !== 'development'){
              if (event.origin !== "https://holotv.space") {
                document.querySelectorAll('body')[0].remove();
                document.querySelectorAll('html')[0].innerHTML = '<style>body,html{background:#000;color:#fff;position:relative;margin:0;height:100%;font:12px Verdana,sans-serif;} .error_player{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:100%;width:100%;text-align:center;font-size:18px;}</style><div class="error_player">Контент не найден или недоступен в вашем регионе! <br>Приносим свои извинения за неудобства.</div>';
                return;
              }
            }
          }


          // Обработка сообщения с переменной
          if (event.data.type === "MY_VARIABLES") {
            const receivedVariable = event.data.value;
            skipCredits = receivedVariable.skipCredits
            skipIntro = receivedVariable.skipIntro
            skipIntroEnd = receivedVariable.skipIntroEnd
            skipRepeat = receivedVariable.skipRepeat
            skipRepeatEnd = receivedVariable.skipRepeatEnd
            defaultSubtitle = receivedVariable.defaultSubtitle

            var vs = {id:"playerjs"}

            if(defaultSubtitle){
              vs.default_subtitle = defaultSubtitle
            }

            if(skipRepeatEnd){
              vs.skipRepeat = skipRepeat ? skipRepeat : 1
              vs.skipRepeatEnd = skipRepeatEnd
            }
            if(skipIntroEnd){
              vs.skipIntro = skipIntro ? skipIntro : 1
              vs.skipIntroEnd = skipIntroEnd
            }
            if(skipCredits){
              vs.skipCredits = skipCredits
            }

            for(var i = 0; i<ps.length; i++){
              var p = ps[i].substr(0,ps[i].indexOf("="));
              var v = ps[i].substr(ps[i].indexOf("=")+1);
              if(p!=v){
                vs[p] = decodeURIComponent(v);
              }
            }
            playerjs = new Playerjs(vs);
          }
        });
            
    </script>
</body>
</html>